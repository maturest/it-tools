import{r as e,a as t,u as a,g as n,o as l,c as u,w as o,s as r,b as i,d as s,t as c,e as d,f as v,h as p,i as f,j as y,k as m,l as g,m as w}from"./index-1ecd366e.js";function b(e){return!!n()&&(l(e),!0)}function h(e){return"function"==typeof e?e():a(e)}const x="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const _=Object.prototype.toString,A=()=>{};const S=x?window:void 0,j=x?window.navigator:void 0;function T(e){var t;const a=h(e);return null!=(t=null==a?void 0:a.$el)?t:a}function k(...e){let t,a,n,l;if("string"==typeof e[0]||Array.isArray(e[0])?([a,n,l]=e,t=S):[t,a,n,l]=e,!t)return A;Array.isArray(a)||(a=[a]),Array.isArray(n)||(n=[n]);const u=[],r=()=>{u.forEach((e=>e())),u.length=0},i=o((()=>[T(t),h(l)]),(([e,t])=>{if(r(),!e)return;const l=(o=t,"[object Object]"===_.call(o)?{...t}:t);var o;u.push(...a.flatMap((t=>n.map((a=>((e,t,a,n)=>(e.addEventListener(t,a,n),()=>e.removeEventListener(t,a,n)))(e,t,a,l))))))}),{immediate:!0,flush:"post"}),s=()=>{i(),r()};return b(s),s}function z(t){const a=function(){const t=e(!1),a=i();return a&&s((()=>{t.value=!0}),a),t}();return u((()=>(a.value,Boolean(t()))))}function E(e,t={}){const{controls:a=!1,navigator:n=j}=t,l=z((()=>n&&"permissions"in n)),u=r(),o="string"==typeof e?{name:e}:e,i=r(),s=()=>{var e,t;i.value=null!=(t=null==(e=u.value)?void 0:e.state)?t:"prompt"};k(u,"change",s);const d=function(e){let t;function a(){return t||(t=e()),t}return a.reset=async()=>{const e=t;t=void 0,e&&await e},a}((async()=>{if(l.value){if(!u.value)try{u.value=await n.permissions.query(o)}catch(e){u.value=void 0}finally{s()}return a?c(u.value):void 0}}));return d(),a?{state:i,isSupported:l,query:d}:i}function C(a={}){const{navigator:n=j,read:l=!1,source:o,copiedDuring:r=1500,legacy:i=!1}=a,s=z((()=>n&&"clipboard"in n)),c=E("clipboard-read"),d=E("clipboard-write"),v=u((()=>s.value||i)),p=e(""),f=e(!1),y=function(a,n,l={}){const{immediate:u=!0}=l,o=e(!1);let r=null;function i(){r&&(clearTimeout(r),r=null)}function s(){o.value=!1,i()}function c(...e){i(),o.value=!0,r=setTimeout((()=>{o.value=!1,r=null,a(...e)}),h(n))}return u&&(o.value=!0,x&&c()),b(s),{isPending:t(o),start:c,stop:s}}((()=>f.value=!1),r);function m(e){return"granted"===e||"prompt"===e}return v.value&&l&&k(["copy","cut"],(function(){var e,t,a;s.value&&m(c.value)?n.clipboard.readText().then((e=>{p.value=e})):p.value=null!=(a=null==(t=null==(e=null==document?void 0:document.getSelection)?void 0:e.call(document))?void 0:t.toString())?a:""})),{isSupported:v,text:p,copied:f,copy:async function(e=h(o)){v.value&&null!=e&&(s.value&&m(d.value)?await n.clipboard.writeText(e):function(e){const t=document.createElement("textarea");t.value=null!=e?e:"",t.style.position="absolute",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}(e),p.value=e,f.value=!0,y.start())}}}const q={class:"p-5 flex justify-center"},G={__name:"trans",setup(t){const a=e(""),n=u((()=>a.value.replaceAll("\\","/"))),{copy:l}=C(),o=async()=>{try{await l(n.value),w.success("相对路径已复制到剪贴板")}catch(e){w.error("复制失败: ",e)}};return(e,t)=>{const l=d("a-input"),u=d("a-button"),r=d("a-flex"),i=d("a-col"),s=d("a-row"),c=d("a-card");return v(),p("div",null,[f("div",q,[y(c,{title:"相对路径转换",class:"w-10/12"},{default:m((()=>[y(s,null,{default:m((()=>[y(i,{span:24,flex:""},{default:m((()=>[y(r,null,{default:m((()=>[y(l,{value:a.value,"onUpdate:value":t[0]||(t[0]=e=>a.value=e),placeholder:"请输入 windows 相对路径",size:"large"},null,8,["value"]),y(u,{class:"ml-4",type:"primary",size:"large"},{default:m((()=>t[2]||(t[2]=[g("转换")]))),_:1})])),_:1})])),_:1})])),_:1}),y(s,{class:"mt-5"},{default:m((()=>[y(i,{span:24,flex:""},{default:m((()=>[y(r,null,{default:m((()=>[y(l,{value:n.value,"onUpdate:value":t[1]||(t[1]=e=>n.value=e),placeholder:"将转换为 linux 的相对路径",size:"large"},null,8,["value"]),y(u,{class:"ml-4 bg-emerald-400",type:"primary",size:"large",onClick:o},{default:m((()=>t[3]||(t[3]=[g("复制")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])])}}};export{G as default};
